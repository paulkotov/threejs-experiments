<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day 4: Let There Be Light - Illumination Techniques</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Day 4 Info Panel -->
  <div class="info-panel">
    <h1>ğŸ’¡ Day 4: Let There Be Light</h1>
    <p><strong>Concept:</strong> Mastering Illumination & Shadows</p>
    <p><strong>Skills:</strong> Light Types Â· Shadow Quality Â· Atmosphere Â· Mood</p>

    <div class="lights-status">
      <p><strong>ğŸ”† Active Lights:</strong></p>
      <ul id="lights-list">
        <li><span class="light-indicator on" id="ambient-indicator">â—</span> Ambient Light</li>
        <li><span class="light-indicator on" id="directional-indicator">â—</span> Directional Light</li>
        <li><span class="light-indicator on" id="point-indicator">â—</span> Point Light</li>
        <li><span class="light-indicator off" id="spot-indicator">â—</span> Spot Light</li>
        <li><span class="light-indicator on" id="hemisphere-indicator">â—</span> Hemisphere Light</li>
      </ul>
    </div>

    <div class="controls-info">
      <p><strong>âŒ¨ï¸ Keyboard Controls:</strong></p>
      <ul>
        <li><kbd>A</kbd> - Toggle Ambient Light</li>
        <li><kbd>D</kbd> - Toggle Directional Light</li>
        <li><kbd>P</kbd> - Toggle Point Light</li>
        <li><kbd>S</kbd> - Toggle Spot Light</li>
        <li><kbd>H</kbd> - Toggle Hemisphere Light</li>
        <li><kbd>L</kbd> - Toggle Light Helpers</li>
        <li><kbd>R</kbd> - Reset All Lights</li>
      </ul>
      <p><strong>ğŸ–±ï¸ Mouse:</strong></p>
      <ul>
        <li>Drag to rotate Â· Scroll to zoom</li>
      </ul>
    </div>
  </div>

  <!-- ThreeJS Core Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <!-- OrbitControls -->
  <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>

  <!-- Day 4 Script -->
  <script>
    // ========================================
    // DAY 4: LET THERE BE LIGHT!
    // Learning: Light Types, Shadows, Atmosphere
    // ========================================

    // SCENE SETUP
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x050510);
    scene.fog = new THREE.Fog(0x050510, 10, 50);

    // CAMERA
    const camera = new THREE.PerspectiveCamera(
      75,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    );
    camera.position.set(8, 6, 8);
    camera.lookAt(0, 0, 0);

    // RENDERER
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap; // Soft shadows
    document.body.appendChild(renderer.domElement);

    // ORBIT CONTROLS
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.maxPolarAngle = Math.PI / 2;

    // ========================================
    // CREATE SCENE OBJECTS
    // ========================================

    // GROUND PLANE
    const groundGeo = new THREE.PlaneGeometry(30, 30);
    const groundMat = new THREE.MeshStandardMaterial({
      color: 0x1a1a2e,
      roughness: 0.8,
      metalness: 0.2
    });
    const ground = new THREE.Mesh(groundGeo, groundMat);
    ground.rotation.x = -Math.PI / 2;
    ground.receiveShadow = true;
    scene.add(ground);

    // CENTRAL SPHERE (Main showcase object)
    const sphereGeo = new THREE.SphereGeometry(1.5, 64, 64);
    const sphereMat = new THREE.MeshStandardMaterial({
      color: 0xffffff,
      roughness: 0.3,
      metalness: 0.7
    });
    const sphere = new THREE.Mesh(sphereGeo, sphereMat);
    sphere.position.y = 1.5;
    sphere.castShadow = true;
    sphere.receiveShadow = true;
    scene.add(sphere);

    // SURROUNDING CUBES
    const cubes = [];
    const cubeGeo = new THREE.BoxGeometry(1, 2, 1);
    const cubePositions = [
      { x: -4, z: -4 }, { x: 4, z: -4 },
      { x: -4, z: 4 }, { x: 4, z: 4 },
      { x: 0, z: -5 }, { x: 0, z: 5 },
      { x: -5, z: 0 }, { x: 5, z: 0 }
    ];

    cubePositions.forEach((pos, i) => {
      const cubeMat = new THREE.MeshStandardMaterial({
        color: new THREE.Color().setHSL(i / cubePositions.length, 0.7, 0.5),
        roughness: 0.5,
        metalness: 0.3
      });
      const cube = new THREE.Mesh(cubeGeo, cubeMat);
      cube.position.set(pos.x, 1, pos.z);
      cube.castShadow = true;
      cube.receiveShadow = true;
      scene.add(cube);
      cubes.push(cube);
    });

    // BACK WALL (to show light direction)
    const wallGeo = new THREE.PlaneGeometry(20, 10);
    const wallMat = new THREE.MeshStandardMaterial({
      color: 0x2a2a3e,
      roughness: 0.9,
      metalness: 0.1
    });
    const wall = new THREE.Mesh(wallGeo, wallMat);
    wall.position.set(0, 5, -10);
    wall.receiveShadow = true;
    scene.add(wall);

    // ========================================
    // LIGHTS - The Stars of Day 4!
    // ========================================

    const lights = {};
    const helpers = {};
    let helpersVisible = false;

    // 1. AMBIENT LIGHT - Base illumination everywhere
    lights.ambient = new THREE.AmbientLight(0x404040, 0.3);
    scene.add(lights.ambient);

    // 2. DIRECTIONAL LIGHT - Simulates sun
    lights.directional = new THREE.DirectionalLight(0xffffff, 0.8);
    lights.directional.position.set(5, 10, 3);
    lights.directional.castShadow = true;

    // Configure shadow quality
    lights.directional.shadow.mapSize.width = 2048;
    lights.directional.shadow.mapSize.height = 2048;
    lights.directional.shadow.camera.left = -15;
    lights.directional.shadow.camera.right = 15;
    lights.directional.shadow.camera.top = 15;
    lights.directional.shadow.camera.bottom = -15;
    lights.directional.shadow.camera.near = 0.1;
    lights.directional.shadow.camera.far = 40;

    scene.add(lights.directional);
    helpers.directional = new THREE.DirectionalLightHelper(lights.directional, 1);

    // 3. POINT LIGHT - Light bulb (animated)
    lights.point = new THREE.PointLight(0xff6b00, 1, 50, 2);
    lights.point.position.set(-3, 3, 2);
    lights.point.castShadow = true;
    lights.point.shadow.mapSize.width = 1024;
    lights.point.shadow.mapSize.height = 1024;
    scene.add(lights.point);
    helpers.point = new THREE.PointLightHelper(lights.point, 0.5);

    // 4. SPOT LIGHT - Flashlight/stage light (starts off)
    lights.spot = new THREE.SpotLight(0x00ffff, 2, 20, Math.PI / 6, 0.3, 2);
    lights.spot.position.set(0, 8, 0);
    lights.spot.target.position.set(0, 0, 0);
    lights.spot.castShadow = true;
    lights.spot.shadow.mapSize.width = 1024;
    lights.spot.shadow.mapSize.height = 1024;
    scene.add(lights.spot);
    scene.add(lights.spot.target);
    lights.spot.visible = false; // Start off
    helpers.spot = new THREE.SpotLightHelper(lights.spot);

    // 5. HEMISPHERE LIGHT - Sky and ground colors
    lights.hemisphere = new THREE.HemisphereLight(0x4488ff, 0xff8844, 0.4);
    lights.hemisphere.position.set(0, 10, 0);
    scene.add(lights.hemisphere);
    helpers.hemisphere = new THREE.HemisphereLightHelper(lights.hemisphere, 1);

    // ========================================
    // UI UPDATE FUNCTIONS
    // ========================================

    function updateLightIndicators() {
      document.getElementById('ambient-indicator').className =
        `light-indicator ${lights.ambient.visible ? 'on' : 'off'}`;
      document.getElementById('directional-indicator').className =
        `light-indicator ${lights.directional.visible ? 'on' : 'off'}`;
      document.getElementById('point-indicator').className =
        `light-indicator ${lights.point.visible ? 'on' : 'off'}`;
      document.getElementById('spot-indicator').className =
        `light-indicator ${lights.spot.visible ? 'on' : 'off'}`;
      document.getElementById('hemisphere-indicator').className =
        `light-indicator ${lights.hemisphere.visible ? 'on' : 'off'}`;
    }

    function toggleLightHelper(name) {
      if (helpers[name]) {
        if (helpersVisible && lights[name].visible) {
          scene.add(helpers[name]);
        } else {
          scene.remove(helpers[name]);
        }
      }
    }

    // ========================================
    // KEYBOARD CONTROLS
    // ========================================

    window.addEventListener('keydown', (event) => {
      switch (event.key.toLowerCase()) {
        case 'a':
          lights.ambient.visible = !lights.ambient.visible;
          console.log(`ğŸ’¡ Ambient Light: ${lights.ambient.visible ? 'ON' : 'OFF'}`);
          break;

        case 'd':
          lights.directional.visible = !lights.directional.visible;
          toggleLightHelper('directional');
          console.log(`â˜€ï¸ Directional Light: ${lights.directional.visible ? 'ON' : 'OFF'}`);
          break;

        case 'p':
          lights.point.visible = !lights.point.visible;
          toggleLightHelper('point');
          console.log(`ğŸ’¡ Point Light: ${lights.point.visible ? 'ON' : 'OFF'}`);
          break;

        case 's':
          lights.spot.visible = !lights.spot.visible;
          toggleLightHelper('spot');
          console.log(`ğŸ”¦ Spot Light: ${lights.spot.visible ? 'ON' : 'OFF'}`);
          break;

        case 'h':
          lights.hemisphere.visible = !lights.hemisphere.visible;
          toggleLightHelper('hemisphere');
          console.log(`ğŸŒ“ Hemisphere Light: ${lights.hemisphere.visible ? 'ON' : 'OFF'}`);
          break;

        case 'l':
          helpersVisible = !helpersVisible;
          Object.keys(helpers).forEach(name => {
            if (helpersVisible && lights[name].visible) {
              scene.add(helpers[name]);
            } else {
              scene.remove(helpers[name]);
            }
          });
          console.log(`ğŸ”§ Light Helpers: ${helpersVisible ? 'ON' : 'OFF'}`);
          break;

        case 'r':
          // Reset all lights to default state
          lights.ambient.visible = true;
          lights.directional.visible = true;
          lights.point.visible = true;
          lights.spot.visible = false;
          lights.hemisphere.visible = true;
          Object.keys(helpers).forEach(name => scene.remove(helpers[name]));
          helpersVisible = false;
          console.log('ğŸ”„ All lights reset to default');
          break;
      }
      updateLightIndicators();
    });

    // ========================================
    // ANIMATION LOOP
    // ========================================

    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);

      const elapsedTime = clock.getElapsedTime();

      // Rotate central sphere
      sphere.rotation.y = elapsedTime * 0.3;
      sphere.rotation.x = Math.sin(elapsedTime * 0.2) * 0.1;

      // Rotate cubes
      cubes.forEach((cube, i) => {
        cube.rotation.y = elapsedTime * 0.5 + i * 0.2;
        cube.position.y = 1 + Math.sin(elapsedTime * 2 + i) * 0.2;
      });

      // Animate point light in a circle
      const radius = 5;
      lights.point.position.x = Math.cos(elapsedTime * 0.5) * radius;
      lights.point.position.z = Math.sin(elapsedTime * 0.5) * radius;
      lights.point.position.y = 3 + Math.sin(elapsedTime) * 1;

      // Pulse point light intensity
      lights.point.intensity = 1 + Math.sin(elapsedTime * 3) * 0.3;

      // Update helpers if visible
      if (helpersVisible) {
        Object.values(helpers).forEach(helper => {
          if (helper.update) helper.update();
        });
      }

      // Update controls
      controls.update();

      // Render
      renderer.render(scene, camera);
    }

    animate();

    // ========================================
    // WINDOW RESIZE
    // ========================================

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    });

    // ========================================
    // CONSOLE WELCOME
    // ========================================

    console.log('ğŸ’¡ Day 4: Let There Be Light!');
    console.log('');
    console.log('ğŸŒŸ 5 Different Light Types:');
    console.log('  âœ“ Ambient Light - Base illumination (no shadows)');
    console.log('  âœ“ Directional Light - Sunlight (parallel rays, shadows)');
    console.log('  âœ“ Point Light - Light bulb (radiates in all directions)');
    console.log('  âœ“ Spot Light - Flashlight (cone of light, shadows)');
    console.log('  âœ“ Hemisphere Light - Sky + ground ambient');
    console.log('');
    console.log('ğŸ® Controls:');
    console.log('  [A] Toggle Ambient  | [D] Toggle Directional');
    console.log('  [P] Toggle Point    | [S] Toggle Spot');
    console.log('  [H] Toggle Hemisphere | [L] Show Light Helpers');
    console.log('  [R] Reset All Lights');
    console.log('');
    console.log('ğŸ’¡ Try This:');
    console.log('  1. Press [A] to see the scene without ambient light');
    console.log('  2. Turn off all lights, then add them back one by one');
    console.log('  3. Press [L] to visualize where lights are positioned');
    console.log('  4. Press [S] to add dramatic spot light from above');
    console.log('');
    console.log('ğŸ“š What you\'re learning:');
    console.log('  âœ“ Different light types and when to use them');
    console.log('  âœ“ Shadow configuration and quality');
    console.log('  âœ“ Creating atmosphere and mood with lighting');
    console.log('  âœ“ Light helpers for debugging');

    // Initial UI update
    updateLightIndicators();
  </script>
</body>

</html>